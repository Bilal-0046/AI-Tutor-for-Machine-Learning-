<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ML Tutor Pro - Chat Interface</title>

    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Babel Standalone for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons -->
    <link rel="stylesheet" href="https://unpkg.com/lucide-static@0.263.0/font/lucide.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            background-color: #0f0f23;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #3b82f6, #9333ea);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(to bottom, #2563eb, #7c3aed);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes rotate360 {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out;
        }

        .animate-slideIn {
            animation: slideIn 0.3s ease-out;
        }

        .animate-rotate {
            animation: rotate360 20s linear infinite;
        }

        /* Gradient text */
        .gradient-text {
            background: linear-gradient(to right, #3b82f6, #9333ea);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Glass morphism */
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Hover effects */
        .hover-scale {
            transition: transform 0.2s;
        }

        .hover-scale:hover {
            transform: scale(1.05);
        }

        .hover-glow:hover {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- React App -->
    <script type="text/babel">
    {% raw %}
        const { useState, useEffect, useRef, useCallback } = React;

        const debounce = (func, delay) => {
            let timer;
            return (...args) => {
                clearTimeout(timer);
                timer = setTimeout(() => func(...args), delay);
            };
        };

        const MLTutorChat = () => {
            const [messages, setMessages] = useState([
                {
                    role: 'bot',
                    content: 'Hello! I\'m your ML Tutor. Ask me anything about Machine Learning, Deep Learning, NLP, Computer Vision, or any ML-related topic!'
                }
            ]);
            const [input, setInput] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const chatRef = useRef(null);

            const botResponses = {
                'neural network': 'A neural network is a computational model inspired by biological neural networks. It consists of interconnected nodes (neurons) organized in layers. Each connection has a weight that gets adjusted during training to minimize error.',
                'deep learning': 'Deep Learning is a subset of machine learning using neural networks with multiple layers. These "deep" networks can learn complex patterns in data. Popular architectures include CNNs, RNNs, and Transformers.',
                'supervised learning': 'Supervised Learning is a training method where the model learns from labeled data. The training data contains input-output pairs. Common tasks include classification and regression.',
                'unsupervised learning': 'Unsupervised Learning finds patterns in unlabeled data. The model isn\'t given explicit answers. Common techniques include clustering (K-means, DBSCAN) and dimensionality reduction (PCA).',
                'nlp': 'NLP (Natural Language Processing) enables computers to understand and generate human language. Key tasks include text classification, sentiment analysis, machine translation, and question answering.',
                'computer vision': 'Computer Vision allows machines to interpret visual information. It involves image classification, object detection, semantic segmentation, and more. CNNs are commonly used.',
                'transformer': 'Transformers are neural network architectures based on self-attention mechanisms. They power modern NLP models like BERT and GPT. They excel at capturing long-range dependencies in sequences.',
                'backpropagation': 'Backpropagation is the algorithm used to train neural networks. It computes gradients of the loss function with respect to network weights, enabling efficient learning.',
                'loss function': 'A loss function measures how far predictions are from actual values. Common ones include Mean Squared Error (MSE) for regression and Cross-Entropy for classification. It guides model training.',
                'activation function': 'Activation functions introduce non-linearity to neural networks. Common ones are ReLU, Sigmoid, and Tanh. They enable networks to learn complex patterns.',
            };

            const getBotResponse = (userMsg) => {
                const lowerMsg = userMsg.toLowerCase();

                for (const [key, response] of Object.entries(botResponses)) {
                    if (lowerMsg.includes(key)) {
                        return response;
                    }
                }

                return 'That\'s a great question! Could you be more specific? Ask me about neural networks, supervised/unsupervised learning, NLP, computer vision, transformers, loss functions, activation functions, or backpropagation.';
            };

            const sendMessage = useCallback(() => {
                if (!input.trim()) return;

                const userMessage = input.trim();
                setMessages(prev => [...prev, { role: 'user', content: userMessage }]);
                setInput('');
                setIsLoading(true);

                setTimeout(() => {
                    const botResponse = getBotResponse(userMessage);
                    setMessages(prev => [...prev, { role: 'bot', content: botResponse }]);
                    setIsLoading(false);
                }, 1000);
            }, [input]);

            useEffect(() => {
                if (chatRef.current) {
                    chatRef.current.scrollTop = chatRef.current.scrollHeight;
                }
            }, [messages, isLoading]);

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white flex flex-col">
                    {/* Header */}
                    <header className="border-b border-white/10 bg-black/30 backdrop-blur-xl sticky top-0 z-50 animate-slideIn">
                        <div className="max-w-4xl mx-auto px-4 sm:px-6 py-4">
                            <div className="flex items-center space-x-3">
                                <div className="w-12 h-12 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center animate-rotate">
                                    <i className="lucide-brain text-2xl"></i>
                                </div>
                                <div>
                                    <h1 className="text-lg sm:text-xl font-bold">ML Tutor Pro</h1>
                                    <p className="text-xs text-gray-400 hidden sm:block">AI Learning Assistant</p>
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* Main Chat Area */}
                    <main className="flex-1 max-w-4xl w-full mx-auto px-4 sm:px-6 py-6 sm:py-8 flex flex-col">
                        <div className="p-6 sm:p-8 rounded-2xl bg-white/5 border border-white/10 flex flex-col h-full animate-fadeIn">
                            {/* Chat Header */}
                            <div className="flex items-center space-x-3 mb-6 pb-4 border-b border-white/10">
                                <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center animate-rotate">
                                    <i className="lucide-brain text-2xl"></i>
                                </div>
                                <div>
                                    <h3 className="font-bold">AI ML Tutor</h3>
                                    <p className="text-sm text-gray-400">Ask anything about Machine Learning</p>
                                </div>
                            </div>

                            {/* Messages Area */}
                            <div ref={chatRef} className="flex-1 overflow-y-auto space-y-4 mb-4 pr-2">
                                {messages.map((m, i) => (
                                    <div key={i} className={`flex ${m.role === 'user' ? 'justify-end' : 'justify-start'} animate-slideIn`}>
                                        <div className={`max-w-xs sm:max-w-md lg:max-w-lg p-4 rounded-2xl ${m.role === 'user' ? 'bg-gradient-to-br from-blue-600 to-purple-600' : 'bg-white/10'} hover-scale`}>
                                            <p className="text-sm sm:text-base">{m.content}</p>
                                        </div>
                                    </div>
                                ))}
                                {isLoading && (
                                    <div className="flex justify-start">
                                        <div className="bg-white/10 p-4 rounded-2xl">
                                            <div className="flex space-x-2">
                                                <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                                                <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{animationDelay: '0.1s'}}></div>
                                                <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{animationDelay: '0.2s'}}></div>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>

                            {/* Input Area */}
                            <div className="flex space-x-3">
                                <input
                                    type="text"
                                    value={input}
                                    onChange={(e) => setInput(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && sendMessage()}
                                    placeholder="Ask a question about ML..."
                                    className="flex-1 px-4 py-3 rounded-xl bg-white/5 border border-white/10 focus:border-blue-500 focus:outline-none text-white placeholder-gray-500 transition-all text-sm sm:text-base"
                                    disabled={isLoading}
                                />
                                <button
                                    onClick={sendMessage}
                                    disabled={isLoading || !input.trim()}
                                    className="px-6 py-3 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 hover:opacity-90 disabled:opacity-50 transition-all hover-scale font-semibold flex items-center space-x-2"
                                >
                                    <i className="lucide-send text-lg"></i>
                                </button>
                            </div>

                            {/* Help Text */}
                            <div className="mt-4 p-3 rounded-lg bg-blue-500/10 border border-blue-500/30 text-xs sm:text-sm text-blue-100">
                                <strong>ðŸ’¡ Try asking about:</strong> neural networks, deep learning, supervised/unsupervised learning, NLP, computer vision, transformers, loss functions, or backpropagation
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        const App = () => <MLTutorChat />;

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    {% endraw %}
    </script>
</body>
</html>
